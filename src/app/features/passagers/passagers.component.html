<div class="flex justify-content-between align-items-center mb-3">
  <h2 class="m-0">Passagers</h2>
  <button pButton label="Nouveau Passager" icon="pi pi-plus" (click)="open()"></button>
</div>

<div class="mb-3">
  <span class="p-input-icon-left" style="width: 100%;">
    <i class="pi pi-search"></i>
    <input pInputText (input)="dt.filterGlobal($any($event.target).value, 'contains')" placeholder="Rechercher (nom, téléphone, NNI/Passport)..." [style]="{width:'100%'}" />
  </span>
</div>

<p-table #dt [value]="passagers()" [paginator]="true" [rows]="10" [globalFilterFields]="['nom','telephone','nniPassport']">
  <ng-template pTemplate="header">
    <tr><th>Nom</th><th>Téléphone</th><th>{{ passengerIdentifierLabel() }}</th><th>Actions</th></tr>
  </ng-template>
  <ng-template pTemplate="body" let-p>
    <tr>
      <td>{{ p.nom }}</td>
      <td>{{ p.telephone }}</td>
      <td>{{ p.nniPassport || '-' }}</td>
      <td class="flex gap-2">
        <button pButton icon="pi pi-pencil" (click)="edit(p)"></button>
        <button pButton icon="pi pi-times" severity="danger" (click)="remove(p)"></button>
      </td>
    </tr>
  </ng-template>
</p-table>

<p-dialog [(visible)]="dialog" [modal]="true" header="Passager" [style]="{width:'420px'}">
  <div class="flex flex-column gap-3">
    <input pInputText placeholder="Nom complet" [(ngModel)]="form.nom" [style]="{width:'100%'}" />
    <input pInputText placeholder="Téléphone (222-XX-XX-XX-XX)" [(ngModel)]="form.telephone" [style]="{width:'100%'}" />
    <input pInputText [placeholder]="passengerIdentifierLabel()" [(ngModel)]="form.nniPassport" [style]="{width:'100%'}" />
  </div>
  <ng-template pTemplate="footer">
    <button pButton label="Annuler" (click)="dialog=false" text></button>
    <button pButton label="Enregistrer" (click)="save()"></button>
  </ng-template>
</p-dialog>
